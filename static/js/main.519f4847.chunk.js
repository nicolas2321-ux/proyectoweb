(this.webpackJsonpproyectopw=this.webpackJsonpproyectopw||[]).push([[0],{129:function(e,t,n){},132:function(e,t,n){},139:function(e,t){},143:function(e,t){},162:function(e,t){},730:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(24),o=n.n(c),s=(n(129),n(3)),i=n.n(s),l=n(5),u=n(6),b=n(7),d=n(124),p="https://posts-pw2021.herokuapp.com/api/v1",x={};x.login=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x.verifyToken=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x.create=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r,a){var c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(p,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify({title:t,description:n,image:r})});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();var j=x,m=n(1),h=a.a.createContext(),f="token",g=function(e){var t=Object(r.useState)(void 0),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(void 0),s=Object(u.a)(o,2),b=s[0],p=s[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=v())){e.next=8;break}return e.next=4,j.verifyToken(t);case 4:n=e.sent,r=n.username,a=n.role,r&&a&&(p({username:r,role:a}),x(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]);var x=function(e){localStorage.setItem(f,e),c(e)},g=Object(r.useCallback)((function(e,t){var n=function(){var n=Object(l.a)(i.a.mark((function n(){var r,a,c;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!1,n.prev=1,n.next=4,j.login(e,t);case 4:a=n.sent,(c=a.token)&&(x(c),r=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),console.error("Error in login");case 13:return n.prev=13,n.abrupt("return",r);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}();return n()}),[]),O=Object(r.useCallback)((function(){p(void 0),x(void 0)}),[]),y=Object(r.useMemo)((function(){return{token:a,user:b,login:g,logout:O}}),[a,b,g,O]);return Object(m.jsx)(h.Provider,Object(d.a)({value:y},e))},O=function(){var e=a.a.useContext(h);if(!e)throw new Error("useUserContext() must be inside of UserProvider");return e},v=function(){return localStorage.getItem(f)};function y(){var e=O(),t=e.login,n=e.token,a=Object(r.useState)(""),c=Object(u.a)(a,2),o=c[0],s=c[1],d=Object(r.useState)(""),p=Object(u.a)(d,2),x=p[0],j=p[1],h=Object(r.useState)(!1),f=Object(u.a)(h,2),g=f[0],v=f[1],y=function(e,t){t(e.target.value)},w=function(){var e=Object(l.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(o,x);case 3:r=e.sent,v(!r),s(""),j("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?(console.log("Ya se loggea"),Object(m.jsx)(b.a,{replace:!0,to:"/redirect"})):Object(m.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-bl from-emerald-400 to-indigo-800",children:Object(m.jsx)("main",{className:"w-3/4 max-w-3xl bg-blue-100 rounded-md p-8 md:p-10 shadow-md",children:Object(m.jsxs)("form",{onSubmit:w,className:"flex flex-col gap-4 items-center justify-center",children:[Object(m.jsx)("h2",{className:"text-gray-800 font-monserrat font-black text-4xl",children:"Proyecto Final"}),Object(m.jsx)("h3",{className:"-mt-4 p-0 font-monserrat text-gray-800 font-bold min-w-max",children:" Programaci\xf3n Web"}),g&&Object(m.jsx)("p",{className:"w-full rounded p-3 text-center text-yellow-800 font-roboto bg-amber-300 select-none",children:"Ha ocurrido un error. Por favor, revisa tus credenciales y vuelve a intentarlo"}),Object(m.jsx)("input",{className:"font-medium w-full text-gray-700 focus:outline-none focus:ring focus:border-gray-700 p-2 rounded",type:"text",value:o,placeholder:"Usuario",onChange:function(e){return y(e,s)}}),Object(m.jsx)("input",{className:"font-medium w-full text-gray-700 focus:outline-none focus:ring focus:border-gray-700 p-2 rounded",type:"password",placeholder:"Contrase\xf1a",onChange:function(e){return y(e,j)},value:x}),Object(m.jsx)("button",{className:"mt-6 w-full transition rounded border border-blue-500 duration-300 ease-in-out text-xl text-extrabold uppercase bg-blue-500 hover:bg-blue-700 py-2 px-4 text-gray-100",children:"Ingresar"})]})})})}function w(){var e=Object(b.g)(),t=O().logout,n=Object(r.useState)(""),a=Object(u.a)(n,2);a[0],a[1];return Object(m.jsx)("section",{className:"flex flex-col justify-center items-center min-h-screen min-w-scren",children:Object(m.jsxs)("div",{className:"p-10 w-11/12 lg:w-1/2 h-max min-h-screen flex flex-col justify-around items-center bg-gradient-to-tr from-bluegray-50 to-warmgray-50 shadow-md",children:[Object(m.jsx)("h2",{className:"text-5xl lg:text-6xl font-extrabold text-gray-800 text-center mb-4",children:"P\xe1gina de Admin"}),Object(m.jsx)("h3",{className:"text-xl lg:text-4xl font-medium text-gray-700 text-center -mt-12",children:"Has ingresado a la plataforma con credenciales de administrador"}),Object(m.jsx)("p",{className:"text-lg lg:text-3xl font-medium text-gray-400 text-center -mt-12",children:"Selecciona uno de los botones para realizar la acci\xf3n correspondiente"}),Object(m.jsx)("button",{onClick:function(){e("/Owned")},className:"mt-6 w-1/2 lg:w-1/3 transition rounded border border-blue-500 hover:border-blue-400 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-400 py-2 px-4 hover:text-blue-700 text-gray-100",children:"Ver mis posts"}),Object(m.jsx)("button",{className:"mt-6 w-1/2 lg:w-1/3 transition rounded border border-blue-500 hover:border-blue-400 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-400 py-2 px-4 hover:text-blue-700 text-gray-100",onClick:function(){e("/Create")},children:"Crear post"}),Object(m.jsx)("button",{onClick:function(){t(),e("/login")},className:"mt-6 w-1/2 lg:w-1/3 transition rounded border border-blue-500 hover:border-blue-400 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-400 py-2 px-4 hover:text-blue-700 text-gray-100",children:"Cerrar Sesi\xf3n"})]})})}var k=n(16),N=n(20),C=n(18),S=n(17),I=n(9),P=n(19),A=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e){var r;return Object(k.a)(this,n),(r=t.call(this,e)).state={like:!0,fav:!0},r}return Object(N.a)(n,[{key:"render",value:function(){var e=this;if("like"==this.props.type){var t=this.props.getlike;return this.state.like?Object(m.jsx)("span",{children:Object(m.jsx)(I.e,{onClick:function(){e.setState({like:!e.state.like})},onAuxClick:t,className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-red-600 hover:text-opacity-1 transition-all transform hover:scale-125"})}):Object(m.jsx)("span",{children:Object(m.jsx)(P.c,{onClick:function(){e.setState({like:!e.state.like})},className:"cursor-pointer text-red-600 transition-all transform hover:scale-125"})})}return"comment"==this.props.type?Object(m.jsx)("span",{children:Object(m.jsx)(P.b,{className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-coolgray-700 hover:text-opacity-1 transition-all transform hover:scale-125"})}):"fav"==this.props.type?this.state.like?Object(m.jsx)("span",{children:Object(m.jsx)(I.b,{onClick:function(){e.setState({like:!e.state.like})},className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-yellow-600 hover:text-opacity-1 transition-all transform hover:scale-125"})}):Object(m.jsx)("span",{children:Object(m.jsx)(I.c,{onClick:function(){e.setState({like:!e.state.like})},className:"cursor-pointer text-yellow-600 transition-all transform hover:scale-125"})}):void 0}}]),n}(a.a.Component);var T=function(){var e=Object(b.g)();return Object(m.jsxs)("div",{className:"flex flex-col justify-center items-center w-screen h-screen bg-gray-200",children:[Object(m.jsx)("h2",{className:"text-6xl font-roboto text-center",children:"404"}),Object(m.jsx)("h3",{className:"text-xl font-roboto text-center",children:"Not Found"}),Object(m.jsx)("img",{className:"rounded-xl shadow-md border-4 my-8 lg:my-4 border-white lg:w-1/4 w-4/5",src:"https://th.bing.com/th/id/R.40f7688ccccf1ebd4c11f0cd07ac90ce?rik=%2bB12J7U35vMOZQ&riu=http%3a%2f%2ffmobserver.com%2fwp-content%2fuploads%2f2018%2f04%2fmonkey-business.gif&ehk=eAt6SspQJiCr3Xb55drgB6ijTFCCJZqXvLWB4xeq%2bUM%3d&risl=&pid=ImgRaw&r=0"}),Object(m.jsx)("p",{className:"mx-4 text-lg font-roboto text-center",children:"Lo sentimos, nuestros desarrolladores no pudieron encontrar la p\xe1gina que buscabas :("}),Object(m.jsx)("button",{className:"font-roboto bg-gray-300 m-4 py-2 px-4 rounded shadow-md border-2 boder-white text-gray-700",onClick:function(t){e("/login")},children:"Volver al inicio de sesi\xf3n"})]})},B={admin:"/admin",user:"/user"},E=function(){var e,t=O().user;return t?Object(m.jsx)(b.a,{replace:!0,to:null!==(e=B[t.role])&&void 0!==e?e:"/"}):Object(m.jsx)("p",{children:" No se puede redireccionar "})},R=function(e){var t=e.role,n=void 0===t?"user":t,r=e.children,a=O(),c=a.token,o=a.user;return c?o&&o.role===n?r:Object(m.jsx)(b.a,{replace:!0,to:"/404"}):Object(m.jsx)(b.a,{replace:!0,to:"/login"})},z=n(10),D=(n(132),n(25),n(13)),J=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r,a){var c,o,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(){document.getElementById("tittleInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("imageInput").value=""},o=function(){return D.b.success("Succes!",L)},s=function(){return D.b.error("Something went wrong \ud83d\ude15",L)},e.next=5,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-type":"application/json"},body:JSON.stringify({title:t,description:n,image:r})});case 5:if(!(l=e.sent).ok){e.next=16;break}return o(),c(),console.log(l),e.next=12,l.json();case 12:return u=e.sent,e.abrupt("return",u);case 16:return s(),console.log(l),e.abrupt("return",{});case 19:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),L={position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},F=J;function U(){O().token;var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),s=o[0],d=o[1],p=Object(r.useState)(""),x=Object(u.a)(p,2),j=x[0],h=x[1],f=localStorage.getItem("token"),g=function(e,t){t(e.target.value)},v=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),F(n,s,j,f);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(b.g)();return Object(m.jsxs)("div",{className:"w-screen h-screen py-20 px-10",children:[Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(D.a,{})}),Object(m.jsx)("div",{className:"border border-bluegray-200 border shadow-xl mt-8 lg:mt-24 m-auto h-max lg:w-4/12 flex flex-none flex-col p-8",children:Object(m.jsxs)("form",{onSubmit:v,children:[Object(m.jsx)("h2",{className:"my-4 font-RobotoSlab text-3xl w-m",children:"Crea una nueva publicacion!"}),Object(m.jsx)("input",{type:"text",id:"tittleInput",placeholder:"tittle",value:n,onChange:function(e){return g(e,a)},className:"border w-11/12 mb-10 m-5 p-2 text-md"}),Object(m.jsx)("input",{type:"text",id:"descriptionInput",placeholder:"description",value:s,onChange:function(e){return g(e,d)},className:"border w-11/12 mb-10 m-5 p-2 text-md"}),Object(m.jsx)("input",{type:"text",id:"imageInput",placeholder:"image",value:j,onChange:function(e){return g(e,h)},className:"border w-11/12 mb-10 m-5 p-2 text-md"}),Object(m.jsxs)("div",{className:"flex justify-around",children:[Object(m.jsx)("button",{type:"submit",className:"mx-4 w-max lg:w-1/3 transition rounded border border-blue-500 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-700 py-2 px-4 text-gray-100",children:"create"}),Object(m.jsx)("button",{onClick:function(){return y("/admin")},className:"mx-4 w-max lg:w-1/3 transition rounded border border-blue-500 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-700 py-2 px-4 text-gray-100",children:"back"})]})]})})]})}var M=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r,a,c){var o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/update/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json"},body:JSON.stringify({title:r,description:a,image:c})});case 2:return o=e.sent,e.next=5,o.json();case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),H=M;function _(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(u.a)(c,2),s=o[0],b=o[1],d=Object(r.useState)(""),p=Object(u.a)(d,2),x=p[0],j=p[1],h=localStorage.getItem("token"),f=function(e,t){t(e.target.value)},g=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),H(n,s,x,h);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{children:Object(m.jsxs)("form",{onSubmit:g,children:[Object(m.jsx)("h2",{children:"create"}),Object(m.jsx)("input",{type:"text",placeholder:"tittle",value:n,onChange:function(e){return f(e,a)}}),Object(m.jsx)("input",{type:"text",placeholder:"description",value:s,onChange:function(e){return f(e,b)}}),Object(m.jsx)("input",{type:"text",placeholder:"image",value:x,onChange:function(e){return f(e,j)}}),Object(m.jsx)("button",{type:"submit",children:"create"})]})})}var q=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r){var a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/owned","?limit=").concat(t,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,o=c.data,console.log(c),console.log(o),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),G=n(29),W=n(21),Q=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/toggle/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=Q,X=(a.a.Component,function(e){var t=e.identifier,n=e.active;console.log({identifier:t,active:n});var a=localStorage.getItem("token"),c=Object(r.useState)(null),o=Object(u.a)(c,2),s=o[0],b=o[1],d=null!==s?s:n;Object(r.useEffect)((function(){b(n)}),[n,t]);var p=function(){var e=Object(l.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,a);case 2:r=e.sent,b(!n),console.log(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d?Object(m.jsx)("span",{children:Object(m.jsx)(W.a,{onClick:p,className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-red-600 hover:text-opacity-1 transition-all transform hover:scale-125"})}):Object(m.jsx)("span",{children:Object(m.jsx)(W.a,{onClick:p,className:"cursor-pointer text-red-600 transition-all hover:text-gray-400 transform hover:scale-125"})})}),Z=document.getElementById("portal"),Y=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(k.a)(this,n),(e=t.call(this)).componentDidMount=function(){Z.appendChild(e.el)},e.componentWillUnmount=function(){Z.removeChild(e.el)},e.render=function(){var t=e.props.children;return o.a.createPortal(t,e.el)},e.el=document.createElement("div"),e}return n}(r.Component),K=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(N.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.children,e.toogle),n=e.active,r=e.ident,a=e.onChangeTitle,c=e.onChangeDescription,o=e.onChangeImage,s=e.onSubmit;e.newTittle;return Object(m.jsx)(Y,{children:n&&Object(m.jsx)("div",{className:"border rounded-md border-bluegray-300 lg:w-4/12 lg:h-max lg:p-8 w-4/5 px-4 py-8 fixed right-1/2 top-1/2 transform -translate-y-1/2 translate-x-1/2 bg-white shadow-md",children:Object(m.jsxs)("div",{className:"relative",children:[Object(m.jsx)("button",{onClick:t,children:Object(m.jsx)(I.d,{className:"text-2xl fixed top-6 right-6 transform hover:scale-125 transition-all"})}),Object(m.jsx)("h2",{className:"mb-4 font-RobotoSlab text-3xl",children:"Modifica el post"}),Object(m.jsx)("form",{onSubmit:s,children:Object(m.jsxs)("div",{className:"flex flex-none flex-col",children:[Object(m.jsx)("p",{className:"w-max text-lg font-bold  m-auto mb-1",children:" Titulo"}),Object(m.jsx)("input",{onChange:a,type:"text",placeholder:"Mi publicacion...",className:"border w-3/4 mb-10 m-auto p-2 text-md",required:!0}),Object(m.jsx)("p",{className:"w-max text-lg font-bold m-auto mb-1",children:" Descripci\xf3n"}),Object(m.jsx)("input",{onChange:c,type:"text",placeholder:"Lorem ipsum...",className:"border w-3/4 mb-10 m-auto p-2 text-md"}),Object(m.jsx)("p",{className:"w-max text-lg font-bold m-auto mb-1",children:" Imagen"}),Object(m.jsx)("input",{onChange:o,type:"text",placeholder:"Url de la imagen...",className:"border w-3/4 mb-10 m-auto p-2 text-md",required:!0}),Object(m.jsx)("button",{onClick:r,className:"m-auto w-1/2 lg:w-1/3 transition rounded border border-blue-500 duration-300 ease-in-out text-lg text-extrabold uppercase bg-blue-500 hover:bg-blue-700 py-2 px-4 text-gray-100",children:" Enviar! "})]})})]})})})}}]),n}(r.Component),$=function(e){var t=e.identify,n=e.post,a=e.image,c=e.date,o=e.description,s=e.likes,d=void 0===s?[]:s,p=e.user,x=e.active,j=(Object(b.g)(),Object(r.useState)(!1)),h=Object(u.a)(j,2),f=h[0],g=h[1],O=function(){g(!f)},v=Object(r.useState)(""),y=Object(u.a)(v,2),w=y[0],k=y[1],N=Object(r.useState)(""),C=Object(u.a)(N,2),S=C[0],I=C[1],A=Object(r.useState)(""),T=Object(u.a)(A,2),B=T[0],E=T[1],R=localStorage.getItem("token"),z=function(e,t){t(e.target.value),console.log("descripcion ",S),console.log("imagen ",B),console.log("titulo ,",w)},D=function(){var e=Object(l.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),r=H(t,R,w,S,B),console.log(r),alert("Post Actualizado"),O();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"w-11/12 p-8 rounded-xl shadow-xl border border-coolgray-400 my-6 bg-white relative",children:[Object(m.jsxs)("h1",{className:"lg:text-4xl text-2xl uppercase font-bold",children:[" ",p.username]}),Object(m.jsx)("img",{className:"rounded my-2 lg:my-8",src:a,alt:"Image posted from user ".concat(p.username," ")}),Object(m.jsxs)("div",{className:"w-max right-8 mt-1  flex flex-row absolute lg:text-4xl gap-2",children:[Object(m.jsx)(P.a,{className:"text-red-600 transition-all transform hover:scale-125"}),Object(m.jsx)("p",{children:d.length}),Object(m.jsx)(G.a,{onClick:O,className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-red-600 hover:text-opacity-1 transition-all transform hover:scale-125"}),Object(m.jsx)(X,{identifier:t,active:x})]}),Object(m.jsx)("p",{className:"font-RobotoSlab lg:text-2xl",children:n}),Object(m.jsx)("p",{className:"font-RobotoSlab font-light lg:text-lg text-xs",children:o}),Object(m.jsxs)("p",{className:"font-RobotoSlab font-light lg:text-lg text-xs",children:["fecha: ",c]}),Object(m.jsx)(K,{active:f,toogle:O,ident:function(){console.log(t)},onChangeTitle:function(e){return z(e,k)},onSubmit:D,onChangeDescription:function(e){return z(e,I)},onChangeImage:function(e){return z(e,E)}})]})},ee=n(33),te=function(e){var t=e.direction,n=e.changePage,r=void 0===n?function(){}:n;return"L"===(t="undefined"!==typeof t?t:"R")?Object(m.jsx)("button",{onClick:function(){r()},children:Object(m.jsx)(ee.a,{className:"text-5xl p-2 h-12 w-28 text-blue-400 bg-white rounded shadow relative mx-10 hover:bg-blue-400 hover:text-white transition-all"})}):Object(m.jsx)("button",{onClick:function(){r()},children:Object(m.jsx)(ee.b,{className:"text-5xl p-2 h-12 w-28 text-blue-400 bg-white rounded shadow relative mx-10 hover:bg-blue-400 hover:text-white transition-all"})})};n(133);function ne(){var e=localStorage.getItem("token"),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(0),s=Object(u.a)(o,2),d=s[0],p=s[1],x=Object(r.useState)(0),j=Object(u.a)(x,2),h=j[0],f=j[1];Object(r.useEffect)((function(){var t=function(){var t=Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("click"),t.next=4,q(10,h,e);case 4:n=t.sent,c(n),console.log(n),console.log(n.map((function(e){return e.description}))),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),console.log("esta es post",a._id);case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(){return t.apply(this,arguments)}}();t()}),[h,d]);var g=Object(b.g)();return Object(m.jsx)("section",{className:"flex flex-col justify-center items-center min-h-screen min-w-scren",children:Object(m.jsxs)("div",{className:"p-11 w-11/12 lg:w-1/2 h-max flex flex-col justify-around items-center bg-gradient-to-tr from-bluegray-50 to-warmgray-50 shadow-md",children:[Object(m.jsx)("h2",{className:"text-5xl lg:text-6xl font-extrabold text-gray-800 text-center",children:"Admin post"}),a.map((function(e){return Object(m.jsx)($,{identify:e._id,post:e.title,date:e.createdAt,image:e.image,description:e.description,likes:e.likes,user:e.user,active:e.active})})),Object(m.jsxs)("span",{children:[Object(m.jsx)(te,{direction:"L",changePage:function(){f(h>0?h-=1:h=0)}}),Object(m.jsx)(te,{direction:"R",changePage:function(){f(h+=1)}})]}),Object(m.jsx)("button",{onClick:function(){p(d+1)},className:"fixed bottom-20 right-2 w-max transition rounded border border-blue-500 duration-300 ease-in-out lg:text-lg text-sm text-extrabold bg-blue-500 hover:bg-blue-600 py-2 px-4 text-white",children:"Actualizar"}),Object(m.jsx)("button",{onClick:function(){return g("/admin")},className:"fixed bottom-5 right-2 w-max transition rounded border border-blue-500 duration-300 ease-in-out lg:text-lg text-sm text-extrabold bg-blue-500 hover:bg-blue-600 py-2 px-4 text-white",children:"Regresar"})]})})}var re="https://posts-pw2021.herokuapp.com/api/v1",ae={};ae.login=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ae.verifyToken=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae.create=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r,a){var c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(re,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)},body:JSON.stringify({title:t,description:n,image:r})});case 2:if(!(c=e.sent).ok){e.next=8;break}return e.next=6,c.json();case 6:return o=e.sent,e.abrupt("return",o);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();var ce=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r){var a,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/all","?limit=").concat(t,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});case 2:return a=e.sent,e.next=5,a.json();case 5:return c=e.sent,o=c.data,console.log(c),console.log(o),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1/post/like/").concat(t),{method:"PATCH",headers:{Authorization:"Bearer ".concat(n)}});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,console.log(a),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),se=oe,ie=function(e){var t=e.identifier,n=e.active,a=localStorage.getItem("token"),c=Object(r.useState)(null),o=Object(u.a)(c,2),s=o[0],b=o[1],d=null!==s?s:n;Object(r.useEffect)((function(){b(n)}),[n,t]);var p=function(){var e=Object(l.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t,a);case 2:r=e.sent,console.log(s),console.log(r),b(!n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d?Object(m.jsx)("span",{children:Object(m.jsx)(I.e,{onClick:p,className:"cursor-pointer text-red-600 transition-all hover:text-gray-400 transform hover:scale-125"})}):Object(m.jsx)("span",{children:Object(m.jsx)(I.e,{onClick:p,className:"cursor-pointer text-gray-400 text-opacity-50 hover:text-red-600 hover:text-opacity-1 transition-all transform hover:scale-125"})})},le=function(){var e=Object(l.a)(i.a.mark((function e(t,n,r){var a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){window.location.reload()},c=function(){D.b.error("Algo anda mal con tu comentario...",L)},e.next=4,fetch("".concat("https://posts-pw2021.herokuapp.com/api/v1","/post/comment/").concat(n),{method:"PATCH",headers:{Authorization:"Bearer ".concat(t),"Content-type":"application/json"},body:JSON.stringify({description:r})}).then((function(e){console.log(e),e.ok?a():c()})).catch((function(e){return console.error(e)}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ue=le,be=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e){return Object(k.a)(this,n),t.call(this,e)}return Object(N.a)(n,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{className:"text-blue-900 text-lg capitalize font-RobotoSlab",children:this.props.user}),Object(m.jsx)("p",{className:"pl-4 mb-3 text-sm font-RobotoSlab",children:this.props.description})]})}}]),n}(a.a.Component),de=function(e){var t=e.content,n=localStorage.getItem("token"),a=Object(r.useState)(),c=Object(u.a)(a,2),o=c[0],s=c[1],b=function(){var t=Object(l.a)(i.a.mark((function t(r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.preventDefault(),ue(n,e.postID,o);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"pl-6",children:[Object(m.jsx)("h1",{className:"text-xl -ml-5 text-coolgray-600",children:"Comentarios"}),t.map((function(e){return Object(m.jsx)(be,{id:e._id,description:e.description,user:e.user.username})})),Object(m.jsxs)("form",{onSubmit:b,children:[Object(m.jsx)("input",{type:"text",id:"comment",placeholder:"A\xf1ade un comentario...",value:o,onChange:function(e){return function(e,t){t(e.target.value)}(e,s)},className:"rounded-xl p-2 bg-bluegray-100 -ml-5 w-full"}),Object(m.jsx)("button",{type:"submit",className:"absolute text-4xl",children:Object(m.jsx)(I.a,{})})]})]})},pe=function(e){var t=e.identify,n=e.post,r=e.image,a=e.date,c=e.description,o=e.comments,s=void 0===o?[]:o,i=e.likes,l=void 0===i?[]:i,u=e.user,d=["gp26_user"];Object(b.g)();return Object(m.jsxs)("div",{className:"w-9/12 p-8 rounded-xl shadow-xl border border-coolgray-400 my-6 bg-white relative",children:[Object(m.jsxs)("h1",{className:"lg:text-4xl text-2xl uppercase font-bold",children:[" ",u.username]}),Object(m.jsx)("img",{className:"rounded my-2 lg:my-8 m-auto",src:r,alt:"Image posted from user ".concat(u.username," ")}),Object(m.jsxs)("div",{className:"w-max right-8 mt-1  flex flex-row absolute lg:text-4xl gap-2",children:[Object(m.jsxs)("p",{children:[l.length," "]}),Object(m.jsx)(ie,{identifier:t,active:-1!=l.findIndex((function(e){return e.username===d[0]}))}),Object(m.jsx)(A,{type:"comment"}),Object(m.jsx)(A,{type:"fav"})]}),Object(m.jsx)("p",{className:"font-RobotoSlab lg:text-2xl truncate",children:n}),Object(m.jsx)("p",{className:"font-RobotoSlab font-light lg:text-lg text-xs mt-2 overflow-ellipsis overflow-hidden",children:c}),Object(m.jsx)("p",{className:"font-RobotoSlab font-light lg:text-lg text-xs mt-1",children:a}),Object(m.jsx)(de,{content:s,postID:t})]})};function xe(){var e=O().logout,t=Object(b.g)(),n=(O().token,localStorage.getItem("token")),a=Object(r.useState)(0),c=Object(u.a)(a,2),o=c[0],s=c[1],d=Object(r.useState)([]),p=Object(u.a)(d,2),x=p[0],j=p[1],h=function(){s(o+=1),document.documentElement.scrollTop=0},f=function(){s(o>0?o-=1:o=0),document.documentElement.scrollTop=0};return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("click"),e.next=4,ce(20,o,n);case 4:t=e.sent,j(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),console.log("esta es post",x._id);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[o]),Object(m.jsxs)("section",{className:"flex flex-col justify-center items-center min-h-screen min-w-scren",children:[Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(D.a,{})}),Object(m.jsxs)("div",{className:"lg:p-11 pt-8 pb-16 lg:w-1/2 w-full h-max flex flex-col justify-around items-center bg-gradient-to-tr from-bluegray-50 to-warmgray-50 shadow-md",children:[Object(m.jsx)("h2",{className:"text-5xl lg:text-6xl font-extrabold text-gray-800 text-center",children:"All post"}),Object(m.jsxs)("div",{className:"flex pt-6",children:[Object(m.jsx)(te,{direction:"L",changePage:f}),Object(m.jsxs)("p",{className:"text-xl px-4 py-2 h-max w-max m-0 text-blue-400 bg-white rounded shadow text-center",children:[" ",o+1," "]}),Object(m.jsx)(te,{direction:"R",changePage:h})]}),x.map((function(e){return Object(m.jsx)(pe,{identify:e._id,post:e.title,date:e.createdAt,image:e.image,description:e.description,likes:e.likes,comments:e.comments,user:e.user})})),Object(m.jsxs)("span",{className:"flex",children:[Object(m.jsx)(te,{direction:"L",changePage:f}),Object(m.jsxs)("p",{className:"text-xl px-4 py-2 h-max w-max m-0 text-blue-400 bg-white rounded shadow text-center",children:[" ",o+1," "]}),Object(m.jsx)(te,{direction:"R",changePage:h})]}),Object(m.jsx)("button",{onClick:function(){e(),t("/login")},className:"fixed bottom-5 right-2 w-max transition rounded border border-blue-500 duration-300 ease-in-out lg:text-lg text-sm text-extrabold bg-blue-500 hover:bg-blue-600 py-2 px-4 text-white",children:"Log out"})]})]})}var je=function(){return Object(m.jsx)(z.a,{children:Object(m.jsxs)(b.d,{children:[Object(m.jsx)(b.b,{path:"/login",element:Object(m.jsx)(y,{})}),Object(m.jsx)(b.b,{path:"/redirect",element:Object(m.jsx)(E,{})}),Object(m.jsx)(b.b,{path:"/admin",element:Object(m.jsx)(R,{role:"admin",children:Object(m.jsx)(w,{})})}),Object(m.jsx)(b.b,{path:"/user",element:Object(m.jsxs)(R,{role:"user",children:[" ",Object(m.jsx)(xe,{})," "]})}),Object(m.jsx)(b.b,{path:"/Create",element:Object(m.jsx)(R,{role:"admin",children:Object(m.jsx)(U,{})})}),Object(m.jsx)(b.b,{path:"/Update",element:Object(m.jsx)(R,{role:"admin",children:Object(m.jsx)(_,{})})}),Object(m.jsx)(b.b,{path:"/Owned",element:Object(m.jsx)(R,{role:"admin",children:Object(m.jsx)(ne,{})})}),Object(m.jsx)(b.b,{path:"*",element:Object(m.jsx)(T,{})})]})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,731)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(g,{children:Object(m.jsx)(je,{})})}),document.getElementById("root")),me()}},[[730,1,2]]]);
//# sourceMappingURL=main.519f4847.chunk.js.map